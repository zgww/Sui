# insp-serial

都跟属性、反射有关。所以放在一起思考

期望：

尽可能自动化,尽可能简便，少提供信息或者写代码。

所以必然要用反射自动处理。也必然要支持按类型处理

只提供特例的信息。
特例的信息有：
* 字段要不要忽略(序列化、insp)
* 类型要不要忽略
* 类型要不要自定义处理方法(序列化、insp)
* 对象可以提供自定义的处理？甚至完全覆盖insp的逻辑


通例：
* 下划线开头的字段，不处理
* 默认按类型处理
* 匹配特定规则的， 如int xxColor 


3d场景的保存，并不是序列化。  而是对场景描述文件的修改。
场景描述文件是dsl。所以可以支持if/for。 可以支持只写入有修改的属性。


2d/3d都统一场景描述方案

insp都统一为 对象检视方案, 无关场景

根据根结点的类型切换sceneview.  如果是ViewBase类型，就走2d场景。 如果是Obj3d类型，就渲染到SglSceneView中


# dsl
把属性理解成 set

那么，对于include子prefab,也可以直接对嵌套中的嵌套中的,n个嵌套中的对象进行设置属性

不处理array的变化。 array的设置是整个array更新的

属性只支持一级属性。
不支持a.b = 1
而是a = new a(b=1)

prefab实际上是函数。
如果是对嵌套中的嵌套的节点的修改，则需要提供唯一的id. 不考虑自动处理。

include xx.prefab
    "title.text" = "sdfsdf"

需要修改嵌套的嵌套的情况不多?

dsl不是直接对应对象。而是virtual node
支持ifelse/for

编辑器只是对dsl的预览

暂不考虑默认值去除。
而是有修改的，就记录。 
如果是有修改，然后又改回去，记录也还在。 不管


后续也可以支持参数，支持表达式？