# win32 透明窗口

在opengl/d3d中启用透明窗口

https://zhuanlan.zhihu.com/p/64262579


都是使用DWM来实现


```c

#include <dwmapi.h>
#pragma comment (lib, "dwmapi.lib")

DWM_BLURBEHIND bb = { 0 };
HRGN hRgn = CreateRectRgn(0, 0, -1, -1); //应用毛玻璃的矩形范围，
//参数(0,0,-1,-1)可以让整个窗口客户区变成透明的，而鼠标是可以捕获到透明的区域
bb.dwFlags = DWM_BB_ENABLE | DWM_BB_BLURREGION;
bb.hRgnBlur = hRgn;
bb.fEnable = TRUE;
DwmEnableBlurBehindWindow(hWnd, &bb);

```


d3d还可以更进一步，在创建窗口时使用`WS_EX_NOREDIRECTIONBITMAP`，连离屏表面都不生成了，直接在gpu里处理了


## 高性能透明窗口+鼠标穿透-wpf的方案

如果直接用分层窗口，没法用到硬件加速，性能不好。

https://blog.lindexi.com/post/WPF-%E5%88%B6%E4%BD%9C%E6%94%AF%E6%8C%81%E7%82%B9%E5%87%BB%E7%A9%BF%E9%80%8F%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD%E7%9A%84%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF%E5%BC%82%E5%BD%A2%E7%AA%97%E5%8F%A3.html