# win32 无边框窗口

https://zhuanlan.zhihu.com/p/17896885874


首先要先去掉边框， 这个在CreateWindowEx时，直接指定style为WS_POPUP,就可以。
接下来需要配置窗体透明，可以看窗口-透明窗口.md.一般是以下三种方法:
* Layered窗口 分层窗口?
* DWM
* 无重定向表面的透明窗口
* 在消息中处理WM_NCCALCSIZE/WM_NCHITTEST

# dwm半透明窗口

## 特别注意

同样的Dwm代码+wglCreateContext+SwapBuffer,在两台电脑上，就是一个可以透明，另一个不能透明。 
问题出在SetPixelFormat. 
可以参考glfw， 确定PixelFormat的方式.
以3楼电脑 为例， ChoosePixelFormat返回的是9, 但是glfw第二次ChoosePixelFormat返回的是12， 12的才能窗体半透明

# 使用WM_NCCALCSIZE方案


```c++
        case WM_NCCALCSIZE:
        {
            if (wParam)
            {
                NCCALCSIZE_PARAMS* lp = (LPNCCALCSIZE_PARAMS)lParam;
                if (IsZoomed(hwnd))//最大化时修正客户区外边距
                {
                    lp->rgrc[0].left += 8;
                    lp->rgrc[0].top += 8;
                    lp->rgrc[0].right -= 8;
                    lp->rgrc[0].bottom -= 8;
                }
            }
            return 0;//去除非客户区
        }

        case WM_NCHITTEST:
        {
            RECT rc; GetClientRect(hwnd, &rc);//客户区矩形
            POINT pt; GetCursorPos(&pt); ScreenToClient(hwnd, &pt);//鼠标位置
            if (!IsZoomed(hwnd))//最大化时不用调整大小
            {
                int x = 8;//边框宽度
                if (pt.x < rc.left + x)
                {
                    if (pt.y < rc.top + x)return HTTOPLEFT;//左上角
                    if (pt.y >= rc.bottom - x)return HTBOTTOMLEFT;//左下角
                    return HTLEFT;//左边,可拖拽
                }
                if (pt.x >= rc.right - x)//坐标从0开始，所以使用>=
                {
                    if (pt.y < rc.top + x)return HTTOPRIGHT;//右上角
                    if (pt.y >= rc.bottom - x)return HTBOTTOMRIGHT;//右下角  ,可拖拽
                    return HTRIGHT;//右边, 可以拖拽
                }
                if (pt.y < rc.top + x)return HTTOP;//上边, 可以拖拽
                if (pt.y >= rc.bottom - x)return HTBOTTOM;//下边, 可以拖拽
                if (pt.x >= 400 && pt.y < rc.top + 40) return HTCAPTION;//标题栏,可以移动
            }
            return HTCLIENT;
        }
```

# 无边框带阴影带resize和移动

https://www.cnblogs.com/feipeng8848/p/14493087.html